# Quickstart: Personal Knowledge Base RAG System

**Branch**: `001-knowledge-base-rag` | **Date**: 2026-02-06

## Prerequisites

- Docker and Docker Compose installed
- An API key for at least one LLM provider (OpenAI, Anthropic, Gemini, etc.)

## 1. Clone and Configure

```bash
git clone <repository-url>
cd general-purpose-rag
cp .env.example .env
```

Edit `.env` with your settings:

```env
APP_NAME="My Knowledge Base"
APP_KEY=                          # Generated by Laravel
APP_URL=http://localhost:8000

DB_CONNECTION=pgsql
DB_HOST=postgres
DB_PORT=5432
DB_DATABASE=knowledge_base
DB_USERNAME=app
DB_PASSWORD=secret

REDIS_HOST=redis

QUEUE_CONNECTION=redis
CACHE_STORE=redis

# LLM Provider (at least one required)
OPENAI_API_KEY=sk-...
# ANTHROPIC_API_KEY=
# GEMINI_API_KEY=

# PII Encryption (separate from APP_KEY)
CIPHERSWEET_KEY=                  # Generated by artisan command

# Email (optional, for recap notifications)
MAIL_MAILER=smtp
MAIL_HOST=
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_FROM_ADDRESS=noreply@example.com
```

## 2. Start Services

```bash
docker compose up -d
```

This starts:
- **app**: Laravel application (PHP 8.3 + Nginx/FrankenPHP)
- **postgres**: PostgreSQL 17 with pgvector extension
- **redis**: Queue backend and cache
- **worker**: Queue worker for background jobs
- **scheduler**: Cron-based task scheduler

## 3. Initialize the Application

```bash
# Generate application key
docker compose exec app php artisan key:generate

# Generate CipherSweet encryption key
docker compose exec app php artisan ciphersweet:generate-key
# Copy the output to CIPHERSWEET_KEY in .env

# Run database migrations
docker compose exec app php artisan migrate

# Seed default system settings
docker compose exec app php artisan db:seed

# Create the first admin account
docker compose exec app php artisan app:create-admin
# Follow the prompts to set email and password
```

## 4. Access the Application

Open http://localhost:8000 in your browser. Log in with the admin credentials
you just created.

## 5. Add Your First Content Source

1. Navigate to **Admin > Sources** in the sidebar
2. Click **Add Source**
3. Choose a source type:
   - **Website**: Enter a URL and set crawl depth (1-10)
   - **RSS Feed**: Enter a feed URL and set refresh interval
   - **Document Upload**: Upload a PDF, DOCX, TXT, MD, or HTML file
4. The source will transition through PENDING → PROCESSING → READY
5. The source list auto-refreshes every 5 seconds

## 6. Query Your Knowledge Base

1. Navigate to **Chat** in the sidebar
2. Type a question related to your ingested content
3. The AI will stream a response with numbered citations
4. Click on a citation to see the source chunk and original document link

## Development Commands

```bash
# Run tests
docker compose exec app php artisan test

# Run code style fixer
docker compose exec app ./vendor/bin/pint

# Watch queue jobs
docker compose exec worker php artisan queue:work --verbose

# Generate a recap manually
docker compose exec app php artisan app:generate-recap daily

# Clear caches
docker compose exec app php artisan optimize:clear
```

## Docker Services Overview

| Service | Image | Port | Purpose |
|---------|-------|------|---------|
| app | Custom Dockerfile | 8000 | Laravel web server |
| postgres | pgvector/pgvector:pg17 | 5432 | Database + vectors |
| redis | redis:alpine | 6379 | Queue + cache |
| worker | Same as app | - | Background jobs |
| scheduler | Same as app | - | Cron scheduler |
